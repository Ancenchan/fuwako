<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ¨±èŠ±é˜…è¯»å®¤ ğŸŒ¸ Reading Room</title>
    <style>
        :root { --p-pink: #ffc2d1; --p-blue: #a2d2ff; --p-green: #caffbf; --bg: #fffcf2; }
        body { background: var(--bg); font-family: 'Segoe UI', 'Yu Gothic', sans-serif; display: flex; flex-direction: column; align-items: center; margin: 0; }
        
        /* å¸ƒå±€ */
        .main-layout { display: flex; width: 95%; max-width: 1200px; gap: 20px; padding: 20px; }
        .reader-section { flex: 2; background: white; padding: 30px; border-radius: 30px; border: 4px solid var(--p-pink); box-shadow: 8px 8px 0 var(--p-pink); }
        .sidebar { flex: 1; position: sticky; top: 20px; height: fit-content; }

        /* æ–‡ç« æ ·å¼ */
        .passage { font-size: 1.4rem; line-height: 2.5; color: #444; }
        .word-token { cursor: pointer; border-bottom: 2px dashed var(--p-blue); transition: 0.2s; display: inline-block; padding: 0 2px; }
        .word-token:hover { background: var(--p-blue); color: white; border-radius: 5px; }

        /* å¡ç‰‡æ ·å¼ */
        .info-card { background: white; border-radius: 20px; padding: 20px; border: 3px solid var(--p-blue); box-shadow: 5px 5px 0 var(--p-blue); margin-bottom: 20px; }
        .info-card h3 { margin-top: 0; color: #0369a1; border-bottom: 2px solid var(--p-blue); }

        /* æœç´¢æ¡† */
        .search-box { width: 100%; padding: 10px; border-radius: 15px; border: 2px solid var(--p-pink); margin-bottom: 15px; outline: none; }
        
        .tag { display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem; background: var(--p-green); margin-right: 5px; }
    </style>
</head>
<body>

    <header style="padding: 20px;">
        <h1 style="color: #fb6f92;">ğŸ“– æ²‰æµ¸å¼æ—¥è¯­é˜…è¯» ğŸ¡</h1>
        <p>ç‚¹å‡»ä¸‹æ–¹æ–‡ç« ä¸­çš„å•è¯ï¼Œå³ä¾§ä¼šä¸ºä½ æ­æ™“ç§˜å¯†~</p>
    </header>

    <div class="main-layout">
        <section class="reader-section">
            <h2 id="article-title">ä»Šæ—¥çŸ­æ–‡ï¼šå¤©æ°—ãŒã„ã„ã§ã™ã­</h2>
            <div class="passage" id="passage-content">
                </div>
        </section>

        <aside class="sidebar">
            <input type="text" id="search-input" class="search-box" placeholder="è¾“å…¥å•è¯æŸ¥è¯¢ (å¦‚: é£Ÿã¹ã‚‹)...">
            
            <div id="dictionary-result" class="info-card">
                <h3>ğŸ’¡ å­¦ä¹ ç¬”è®°</h3>
                <div id="details">ç‚¹å‡»æ–‡ç« å•è¯æˆ–åœ¨ä¸Šæ–¹æœç´¢ï¼Œæˆ‘ä¼šåœ¨è¿™é‡Œä¸ºä½ è§£é‡Šã€‚</div>
            </div>

            <div class="info-card" style="border-color: var(--p-green); box-shadow: 5px 5px 0 var(--p-green);">
                <h3>ğŸ“š è¯­æ³•å°è´´å£«</h3>
                <p id="grammar-tip">é€‰ä¸­çš„è¯è¯­è¯­æ³•ç‚¹å°†æ˜¾ç¤ºåœ¨æ­¤ã€‚</p>
            </div>
        </aside>
    </div>

    <script>
        // é¢„è®¾ä¸€ç¯‡ N5 çŸ­æ–‡æ•°æ® (å®é™…å¼€å‘ä¸­å¯ä»¥ä» API æˆ–æœ¬åœ°æ–‡ä»¶åŠ è½½)
        const article = [
            { text: "ä»Šæ—¥", detail: "ã€ãã‚‡ã†ã€‘ä»Šå¤©", grammar: "åè¯ï¼Œä½œæ—¶é—´çŠ¶è¯­ã€‚" },
            { text: "ã¯", detail: "ã€æç¤ºåŠ©è¯ã€‘æ¥åœ¨ä¸»é¢˜åé¢", grammar: "ç”¨äºæç¤ºå…¨å¥çš„ä¸»è¯­æˆ–ä¸»é¢˜ã€‚" },
            { text: "ã¨ã¦ã‚‚", detail: "ã€å‰¯è¯ã€‘éå¸¸", grammar: "ä¿®é¥°å½¢å®¹è¯ï¼Œè¡¨ç¤ºç¨‹åº¦æ·±ã€‚" },
            { text: "ã„ã„", detail: "ã€å½¢å®¹è¯ã€‘å¥½çš„", grammar: "åŸå½¢ä¸º'è‰¯ã„'ï¼Œç”¨äºä¿®é¥°åé¢çš„åè¯ã€‚" },
            { text: "å¤©æ°—", detail: "ã€ã¦ã‚“ãã€‘å¤©æ°”", grammar: "åè¯ã€‚" },
            { text: "ã§ã™", detail: "ã€åˆ¤æ–­åŠ©è¯ã€‘æ˜¯", grammar: "ç”¨äºå¥æœ«ï¼Œè¡¨ç¤ºç¤¼è²Œçš„è‚¯å®šã€‚" },
            { text: "ã­", detail: "ã€ç»ˆåŠ©è¯ã€‘å‘¢/å§", grammar: "ç”¨äºå¾æ±‚å¯¹æ–¹åŒæ„æˆ–æ„Ÿå¹ã€‚" }
        ];

        const container = document.getElementById('passage-content');
        
        // åˆå§‹åŒ–æ–‡ç« æ˜¾ç¤º
        article.forEach(item => {
            const span = document.createElement('span');
            span.className = 'word-token';
            span.innerText = item.text;
            span.onclick = () => showDetail(item);
            container.appendChild(span);
        });

        function showDetail(item) {
            document.getElementById('details').innerHTML = `
                <b style="font-size:1.5rem">${item.text}</b><br>
                <p>${item.detail}</p>
            `;
            document.getElementById('grammar-tip').innerText = item.grammar;
            speak(item.text);
        }

        // å¤–éƒ¨ API æŸ¥è¯¢åŠŸèƒ½ (ä½¿ç”¨ Jisho é•œåƒ API)
        const searchInput = document.getElementById('search-input');
        searchInput.onkeypress = async (e) => {
            if (e.key === 'Enter') {
                const word = searchInput.value;
                document.getElementById('details').innerText = "ğŸ” æ­£åœ¨ç¿»é˜…å­—å…¸...";
                try {
                    // è°ƒç”¨å¼€æºæ—¥è¯­å­—å…¸ API
                    const res = await fetch(`https://jlpt-vocab-api.vercel.app/api/words?level=5`);
                    const data = await res.json();
                    const found = data.words.find(w => w.word === word || w.furigana === word);
                    
                    if (found) {
                        document.getElementById('details').innerHTML = `
                            <span class="tag">API ç»“æœ</span><br>
                            <b style="font-size:1.5rem">${found.word}</b> [${found.furigana}]<br>
                            <p>æ„æ€ï¼š${found.meaning}</p>
                        `;
                    } else {
                        document.getElementById('details').innerText = "æ‰¾ä¸åˆ°è¿™ä¸ªè¯å‘¢ï¼Œæ¢ä¸ªè¯è¯•è¯•ï¼Ÿ";
                    }
                } catch (err) {
                    document.getElementById('details').innerText = "ç½‘ç»œè¿æ¥å¤±è´¥å–µ~";
                }
            }
        };

        function speak(text) {
            const uttr = new SpeechSynthesisUtterance(text);
            uttr.lang = 'ja-JP';
            window.speechSynthesis.speak(uttr);
        }
    </script>
</body>
</html>
